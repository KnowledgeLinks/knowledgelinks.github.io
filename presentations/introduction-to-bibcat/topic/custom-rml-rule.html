<!DOCTYPE html>
<html lang="en-gb" dir="ltr">
    <head>
        <title></title>
        <!-- UIkit CSS -->
        <link rel="stylesheet" 
              href="../static/css/uikit.min.css" />
        <!-- UIkit JS -->
        <script src="../static/js/uikit.min.js"></script>
        <script src="../static/js/uikit-icons.min.js"></script>
    </head>
    <body>
    
    <nav class="uk-navbar-container" uk-navbar>
    <div class="uk-navbar-left">
        <ul class="uk-navbar-nav">
            <li><a href="http://knowledgelinks.io">KL</a></li>
            <li class=""><a href="../index.html">Introduction to BIBCAT</a></li>
            <li >
                <a href="quickstart.html">Quickstart</a>
                <div class="uk-navbar-dropdown">
                    <ul class="uk-nav uk-navbar-dropdown-nav">
                        <li>
                            <a href="install.html">
                                Installing BIBCAT
                            </a>
                        </li>
                        <li>
                            <a href="importing-bibcat.html">
                                Importing BIBCAT and Overview of Functions
                            </a>
                        </li>
                        <li>
                            <a href="marc2bibframe2.html">
                                Using marc2bibframe2 XSLT
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li >
                <a href="rdf-mapping.html">
                        RDF Mapping Language (RML)
                </a>
                <div class="uk-navbar-dropdown">
                    <ul class="uk-nav uk-navbar-dropdown-nav">
                        <li>
                            <a href="filtering-bibframe.html">
                                Filtering BIBFRAME 2.0
                            </a>
                        </li>
                        <li>
                           <a href="mods-to-bibframe-map.html">
                                MODS XML to BIBFRAME 2.0 Map
                            </a>
                        </li>
                        <li>
                           <a href="dublin-core-to-bibframe-map.html">
                                Dublin Core to BIBFRAME Map
                            </a>
                        </li>
                        <li></li>
                        <li>
                           <a href="bibframe-to-dpla-map4-map.html">
                                BIBFRAME 2.0 to DP.LA MAPv4
                            </a>

                        </li>
                        <li>
                            <a href="bibframe-to-schema-org-map.html">
                                BIBFRAME to Schema.org Linked Data
                            </a>
                        </li>
                        <li>
                            <a href="custom-rml-rule.html">
                                Custom RML Rules
                            </a>
                        </li>

                    </ul>
                </div>
            </li>
            <li >
                <a href="bibcat-linking.html">
                    BIBCAT Linking
                </a>
                <div class="uk-navbar-dropdown">
                    <ul class="uk-nav uk-navbar-dropdown-nav">
                        <li>
                            <a href="loc-authorities-linker.html">
                                Library of Congress Authorities Linker
                            </a>
                        </li>
                        <li>
                            <a href="geonames-linker.html">
                                Geonames.org Linker
                            </a>
                        </li>
                        
                    </ul> 
                </div>
            </li>
            <li >
                <a href="bibcat-future.html">
                    Future of BIBCAT
                </a>
                </li>
       </ul>

    </div>
    <div class="uk-navbar-right">
        <ul class="uk-navbar-nav">
            
            <li><a href="bibframe-to-schema-org-map.html" 
               uk-icon="icon:  chevron-left"></a>
            </li>
            
            <li><a href="../index.html"
               uk-icon="icon: home"></a>
            </li>
            
            <li><a href="bibcat-linking.html" 
               uk-icon="icon:  chevron-right"></a>
            </li>
            
            <li><a href="#">About</a></li>
        </ul>
    </div>
</nav>
    
    
<div class="uk-container">
    <div uk-grid>
        <article class="uk-article">
           <h1 class="uk-article-title">Custom RML Rules</h1>
           <p class="uk-article-meta">Written by 
               <a href="http://orcid.org/0000-0002-7543-3893">Jeremy Nelson</a> on
               2017-11-10
           </p>
           <p>An advantage of building RML mapping rules is that you can add
custom RML rules to an existing <code>Processor</code> subclass. For example,
you may want to a <code>bf:heldBy</code> predicate to your <code>bf:Item</code> entities
that points to your institution's IRI.</p>
<p>Referring back to the State of Colorado Publication's library, we
create a new RML <code>predicateObjectMap</code> to the existing BIBFRAME Item
<code>tripleMap</code> with the following:</p>
<pre><code>
@prefix rml:    &lt;http://semweb.mmlab.be/ns/rml#&gt; .
@prefix rr:   &lt; http://www.w3.org/ns/r2rml#&gt;.
@prefix bf: &lt;http://id.loc.gov/ontologies/bibframe/&gt; .

bc:MODS2BIBFRAME_Item  rr:predicateObjectMap [
    rr:predicate bf:heldBy ;
    rr:objectMap [
        rr:constant &lt;https://www.cde.state.co.us/stateinfo&gt; ;
    ]
] .
</code></pre>

<p>Saving this rule in a temporary file, we will create a new <code>XMLProcessor</code>
instance with the new RML rule and rerun the MODS-to-BIBFRAME conversion.</p>
<pre><code>
>>> mods_processor = processor.XMLProcessor(
        rml_rules=['mods-to-bf.ttl',
                   'bibcat-base.ttl',
                   '/Path/to/rule/custom.ttl'],
        base_url = 'https://www.cde.state.co.us/',
        namespaces={"mods": "http://www.loc.gov/mods/v3",
                    "xlink": "https://www.w3.org/1999/xlink"})
>>> mods_processor.run(
        mods_xml,
        instance_iri='https://www.cde.state.co.us/rail-communication-handbook',
        item_iri='http://hermes.cde.state.co.us/drupal/islandora/object/co:21951/')
</code></pre>

<p>Checking the resulting turtle serialization of the output RDF graph, we
can see that 'http://hermes.cde.state.co.us/drupal/islandora/object/co:21951/' subject
now has a new triple with the predicate being <code>bf:heldBy</code> and the object being
the Colorado State Library Publication IRI.</p>
<pre><code>
.
.
.
&lt;http://hermes.cde.state.co.us/drupal/islandora/object/co:21951/&gt; a bf:Item ;
    bf:generationProcess [ a bf:GenerationProcess ;
            bf:generationDate "2017-11-10T14:36:50.510775" ;
            rdf:value "Generated by BIBCAT version 1.18.1 from KnowledgeLinks.io"^^xsd:string ] ;
    bf:heldBy &lt;https://www.cde.state.co.us/stateinfo&gt; ;
    bf:itemOf &lt;https://www.cde.state.co.us/rail-communication-handbook&gt; .

.
.
</code></pre>

<p>This finishes the introduction to RML mapping with <code>bibcat</code>, now we will look at 
a second core functionality, that of linking to other sources of Linked Data with 
our existing BIBFRAME RDF.</p>
        </article>
    </div>
</div>

    
<div class="uk-container uk-margin-large-top">
   <ul class="uk-iconnav">
      
      <a href="bibframe-to-schema-org-map.html" 
         uk-icon="icon:  chevron-left"></a>
      
      <a href="../index.html"
         uk-icon="icon: home"></a>
       
      <a href="bibcat-linking.html" 
         uk-icon="icon:  chevron-right"></a>
      
   </ul>
</div>

    <div class="uk-container uk-margin-large-top">
        <p class="uk-text-muted">
            Original contented Copyrighted &copy; 2017 by Jeremy Nelson and 
            <a href="http://knowledgelinks.io">KnowledgeLinks</a> under
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
                <img alt="Creative Commons License" style="border-width:0" 
                src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>,
            Source code repository licensed under the Apache 2 and available on 
            <a href="https://github.com/KnowledgeLinks/introduction-to-bibcat">Github</a>.
        </p>
    </div>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-70910607-1"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());

     gtag('config', 'UA-70910607-1');
    </script>
    <script async defer src="https://hypothes.is/embed.js"></script>

    </body>
</html>